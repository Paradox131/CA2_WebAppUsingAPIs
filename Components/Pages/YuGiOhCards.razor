@using CA2_WebAppUsingAPIs.Models
@using CA2_WebAppUsingAPIs.Services
@inject JustTcgService JustTcg

<input @bind="search" placeholder="Search card name" />
<button @onclick="DoSearch">Search</button>

@if (cards != null)
{
    <ul>
        @foreach (var c in cards)
        {
            <li>
                @c.name — set: @c.set
                <ul>
                    @foreach (var v in c.variants)
                    {
                        <li>@v.printing / @v.condition — €@v.price</li>
                    }
                </ul>
            </li>
        }
    </ul>
}

@code {
    private string search;
    private Card[] cards;
    private async Task DoSearch()
    {
        cards = await JustTcg.SearchCardsAsync(search);
    }
}
